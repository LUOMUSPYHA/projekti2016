{% extends "pyha/base.html" %}
{% block content %}

    <div class="container-fluid">
    <div class="col-sm-9 col-lg-10">
      <div class="page-header">
        <h2>{{maintext}}</h2>
      </div>
      {% if requests %}
      <h2>Lista tekemistäsi pyynnöistä:</h2>
  <p class ="text-muted"> Napsauta pyyntöä nähdäksesi lisätietoja.</p>            
  <table id="requests-table" class="table table-hover table-bordered">
    <thead>
      <tr bgcolor="#3498DB" style="color:white;">
        <th>Kuvaus</th>
        <th>Päiväys</th>	
        <th>Osumia</th>
        <th>Pyynnön tila</th>
      </tr>
    </thead>
    <tbody>
        
    {% for request in requests %}
        
        
        {% if request.status == 1 %}
            <tr class="info clickable-row"
        {% elif request.status == 3 %}
            <tr class="danger clickable-row"
        {% elif request.status == 2 %}
            <tr class="warning clickable-row"
        {% elif request.status == 0 %}
            <tr class="active clickable-row"
        {% elif request.status == 4 %}
            <tr class="success clickable-row"
        {% else %}  
            <tr	
        {% endif %}
            data-href="request/{{request.order}}"
            >
            <td>{{request.description}}</td>
            <td>{{request.date}}</td>
            <td>{{request.approximateMatches}}</td>
            {% if request.status == 0 %}
                <td>Lähettämättä</td>
            
            {% elif request.status == 1 %}
                <td>Käsittelyssä</td>
                
            {% elif request.status == 2 %}
                <td>Osittain Hyväksytty</td>
                
            {% elif request.status == 3 %}
                <td>Hylätty</td>

            {% elif request.status == 4 %}
                <td>Hyväksytty</td>  
            {% else %}  
                <td>Tuntematon</td>	
            {% endif %}
        
            
        </tr>
        
	{% endfor %}
    
	{% else %}
		<strong> Kannassa ei ole pyyntöjä.</strong>
	{% endif %}
    </tbody>
  </table>
    </div>
  <!--
    <div class="col-sm-3 col-lg-2 side-bar">
  
    </div>
  -->
  </div>
{% endblock %}

{% block script %}
<script>
$(document).ready(function($) {
    $(".clickable-row").click(function() {
        window.document.location = $(this).data("href");
    });
});
</script>
<script>
$(document).ready(function() {
    $('#requests-table').dataTable( {
            "language": {
             {% if LANGUAGE == "fi" %}
            "url":"//cdn.datatables.net/plug-ins/1.10.12/i18n/Finnish.json"
            {% elif LANGUAGE == "sw" %}
            "url":"//cdn.datatables.net/plug-ins/1.10.12/i18n/Swedish.json"
            {% endif %}
            }
        } );
    } );
</script>
{% endblock %}
